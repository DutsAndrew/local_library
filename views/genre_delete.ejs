<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <meta lang="en">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width" initial-scale="1">
    <link rel="stylesheet" href="/stylesheets/style.css" />
  </head>
  <body>
    <%- include('layout') -%>

    <h1 id="title"> 
      <%= title %>
    </h1>

    <% if (typeof(genre_books) !== 'undefined' && genre_books.length > 0) { %>
      <p>
        <strong>
          Remove the "<%= genre.name %>" genre from the following books before attempting to delete this genre.
        </strong>
      </p>

      <div style="margin-left: 20px; margin-top: 20px;">
        <h4>
          Books with <%= genre.name %> genre
        </h4>
        <dl>
          <% genre_books.forEach((book) => { %>
            <dt>
              <a href="<%= book.url %>">
                <%= book.title %>
              </a>
            </dt>
          <% }); %>
        </dl>
      </div>
    <% } else { %>
      <p>
        Do you really want to delete this Genre?
      </p>

      <form method="POST" action="">
        <div class="form-group">
          <input 
            id="genreid"
            class="form-control"
            type="hidden"
            name="genreid"
            required
            value="<%= genre._id %>"
          >
        </div>
        <button class="btn, btn-primary" type="submit">
          Delete
        </button>
      </form>
    <% }; %>

  </body>
</html>